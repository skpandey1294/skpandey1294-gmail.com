{"ast":null,"code":"function FocusGroup(options) {\n  options = options || {};\n  var userKeybindings = options.keybindings || {};\n  this._settings = {\n    keybindings: {\n      next: userKeybindings.next || {\n        keyCode: 40\n      },\n      prev: userKeybindings.prev || {\n        keyCode: 38\n      },\n      first: userKeybindings.first,\n      last: userKeybindings.last\n    },\n    wrap: options.wrap,\n    stringSearch: options.stringSearch,\n    stringSearchDelay: 800\n  }; // Construct a keybinding lookup that will be more useful later\n\n  this._keybindingsLookup = [];\n  var action;\n  var eventMatchers;\n\n  for (action in this._settings.keybindings) {\n    eventMatchers = this._settings.keybindings[action];\n    if (!eventMatchers) continue;\n    [].concat(eventMatchers).forEach(function (eventMatcher) {\n      eventMatcher.metaKey = eventMatcher.metaKey || false;\n      eventMatcher.ctrlKey = eventMatcher.ctrlKey || false;\n      eventMatcher.altKey = eventMatcher.altKey || false;\n      eventMatcher.shiftKey = eventMatcher.shiftKey || false;\n\n      this._keybindingsLookup.push({\n        action: action,\n        eventMatcher: eventMatcher\n      });\n    }.bind(this));\n  }\n\n  this._searchString = '';\n  this._members = [];\n  if (options.members) this.setMembers(options.members);\n  this._boundHandleKeydownEvent = this._handleKeydownEvent.bind(this);\n}\n\nFocusGroup.prototype.activate = function () {\n  // Use capture in case other libraries might grab it first -- i.e. React\n  document.addEventListener('keydown', this._boundHandleKeydownEvent, true);\n  return this;\n};\n\nFocusGroup.prototype.deactivate = function () {\n  document.removeEventListener('keydown', this._boundHandleKeydownEvent, true);\n\n  this._clearSearchStringRefreshTimer();\n\n  return this;\n};\n\nFocusGroup.prototype._handleKeydownEvent = function (event) {\n  // Only respond to keyboard events when\n  // focus is already within the focus-group\n  var activeElementIndex = this._getActiveElementIndex();\n\n  if (activeElementIndex === -1) return; // See if the event matches any registered keybinds\n\n  var eventBound = false;\n\n  this._keybindingsLookup.forEach(function (keybinding) {\n    if (!matchesEvent(keybinding.eventMatcher, event)) return;\n    eventBound = true;\n    event.preventDefault();\n\n    switch (keybinding.action) {\n      case 'next':\n        this.moveFocusForward();\n        break;\n\n      case 'prev':\n        this.moveFocusBack();\n        break;\n\n      case 'first':\n        this.moveFocusToFirst();\n        break;\n\n      case 'last':\n        this.moveFocusToLast();\n        break;\n\n      default:\n        return;\n    }\n  }.bind(this));\n\n  if (!eventBound) {\n    this._handleUnboundKey(event);\n  }\n};\n\nFocusGroup.prototype.moveFocusForward = function () {\n  var activeElementIndex = this._getActiveElementIndex();\n\n  var targetIndex;\n\n  if (activeElementIndex < this._members.length - 1) {\n    targetIndex = activeElementIndex + 1;\n  } else if (this._settings.wrap) {\n    targetIndex = 0;\n  } else {\n    targetIndex = activeElementIndex;\n  }\n\n  this.focusNodeAtIndex(targetIndex);\n  return targetIndex;\n};\n\nFocusGroup.prototype.moveFocusBack = function () {\n  var activeElementIndex = this._getActiveElementIndex();\n\n  var targetIndex;\n\n  if (activeElementIndex > 0) {\n    targetIndex = activeElementIndex - 1;\n  } else if (this._settings.wrap) {\n    targetIndex = this._members.length - 1;\n  } else {\n    targetIndex = activeElementIndex;\n  }\n\n  this.focusNodeAtIndex(targetIndex);\n  return targetIndex;\n};\n\nFocusGroup.prototype.moveFocusToFirst = function () {\n  this.focusNodeAtIndex(0);\n};\n\nFocusGroup.prototype.moveFocusToLast = function () {\n  this.focusNodeAtIndex(this._members.length - 1);\n};\n\nFocusGroup.prototype._handleUnboundKey = function (event) {\n  if (!this._settings.stringSearch) return; // While a string search is underway, ignore spaces\n  // and prevent the default space-key behavior\n\n  if (this._searchString !== '' && (event.key === ' ' || event.keyCode === 32)) {\n    event.preventDefault();\n    return -1;\n  } // Only respond to letter keys\n\n\n  if (!isLetterKeyCode(event.keyCode)) return -1; // If the letter key is part of a key combo,\n  // let it do whatever it was going to do\n\n  if (event.ctrlKey || event.metaKey || event.altKey) return -1;\n  event.preventDefault();\n\n  this._addToSearchString(String.fromCharCode(event.keyCode));\n\n  this._runStringSearch();\n};\n\nFocusGroup.prototype._clearSearchString = function () {\n  this._searchString = '';\n};\n\nFocusGroup.prototype._addToSearchString = function (letter) {\n  // Always store the lowercase version of the letter\n  this._searchString += letter.toLowerCase();\n};\n\nFocusGroup.prototype._startSearchStringRefreshTimer = function () {\n  var self = this;\n\n  this._clearSearchStringRefreshTimer();\n\n  this._stringSearchTimer = setTimeout(function () {\n    self._clearSearchString();\n  }, this._settings.stringSearchDelay);\n};\n\nFocusGroup.prototype._clearSearchStringRefreshTimer = function () {\n  clearTimeout(this._stringSearchTimer);\n};\n\nFocusGroup.prototype._runStringSearch = function () {\n  this._startSearchStringRefreshTimer();\n\n  this.moveFocusByString(this._searchString);\n};\n\nFocusGroup.prototype.moveFocusByString = function (str) {\n  var member;\n\n  for (var i = 0, l = this._members.length; i < l; i++) {\n    member = this._members[i];\n    if (!member.text) continue;\n\n    if (member.text.indexOf(str) === 0) {\n      return focusNode(member.node);\n    }\n  }\n};\n\nFocusGroup.prototype._findIndexOfNode = function (searchNode) {\n  for (var i = 0, l = this._members.length; i < l; i++) {\n    if (this._members[i].node === searchNode) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nFocusGroup.prototype._getActiveElementIndex = function () {\n  return this._findIndexOfNode(document.activeElement);\n};\n\nFocusGroup.prototype.focusNodeAtIndex = function (index) {\n  var member = this._members[index];\n  if (member) focusNode(member.node);\n  return this;\n};\n\nFocusGroup.prototype.addMember = function (memberData, index) {\n  var node = memberData.node || memberData;\n  var nodeText = memberData.text || node.getAttribute('data-focus-group-text') || node.textContent || '';\n\n  this._checkNode(node);\n\n  var cleanedNodeText = nodeText.replace(/[\\W_]/g, '').toLowerCase();\n  var member = {\n    node: node,\n    text: cleanedNodeText\n  };\n\n  if (index !== null && index !== undefined) {\n    this._members.splice(index, 0, member);\n  } else {\n    this._members.push(member);\n  }\n\n  return this;\n};\n\nFocusGroup.prototype.removeMember = function (member) {\n  var removalIndex = typeof member === 'number' ? member : this._findIndexOfNode(member);\n  if (removalIndex === -1) return;\n\n  this._members.splice(removalIndex, 1);\n\n  return this;\n};\n\nFocusGroup.prototype.clearMembers = function () {\n  this._members = [];\n  return this;\n};\n\nFocusGroup.prototype.setMembers = function (nextMembers) {\n  this.clearMembers();\n\n  for (var i = 0, l = nextMembers.length; i < l; i++) {\n    this.addMember(nextMembers[i]);\n  }\n\n  return this;\n};\n\nFocusGroup.prototype.getMembers = function () {\n  return this._members;\n};\n\nFocusGroup.prototype._checkNode = function (node) {\n  if (!node.nodeType || node.nodeType !== window.Node.ELEMENT_NODE) {\n    throw new Error('focus-group: only DOM nodes allowed');\n  }\n\n  return node;\n};\n\nfunction matchesEvent(matcher, event) {\n  for (var key in matcher) {\n    if (event[key] !== undefined && matcher[key] !== event[key]) return false;\n  }\n\n  return true;\n}\n\nfunction isLetterKeyCode(keyCode) {\n  return keyCode >= 65 && keyCode <= 90;\n}\n\nfunction focusNode(node) {\n  if (!node || !node.focus) return;\n  node.focus();\n  if (node.tagName.toLowerCase() === 'input') node.select();\n}\n\nmodule.exports = function createFocusGroup(options) {\n  return new FocusGroup(options);\n};","map":{"version":3,"sources":["/home/skpandey1294/Desktop/oca/node_modules/focus-group/index.js"],"names":["FocusGroup","options","userKeybindings","keybindings","_settings","next","keyCode","prev","first","last","wrap","stringSearch","stringSearchDelay","_keybindingsLookup","action","eventMatchers","concat","forEach","eventMatcher","metaKey","ctrlKey","altKey","shiftKey","push","bind","_searchString","_members","members","setMembers","_boundHandleKeydownEvent","_handleKeydownEvent","prototype","activate","document","addEventListener","deactivate","removeEventListener","_clearSearchStringRefreshTimer","event","activeElementIndex","_getActiveElementIndex","eventBound","keybinding","matchesEvent","preventDefault","moveFocusForward","moveFocusBack","moveFocusToFirst","moveFocusToLast","_handleUnboundKey","targetIndex","length","focusNodeAtIndex","key","isLetterKeyCode","_addToSearchString","String","fromCharCode","_runStringSearch","_clearSearchString","letter","toLowerCase","_startSearchStringRefreshTimer","self","_stringSearchTimer","setTimeout","clearTimeout","moveFocusByString","str","member","i","l","text","indexOf","focusNode","node","_findIndexOfNode","searchNode","activeElement","index","addMember","memberData","nodeText","getAttribute","textContent","_checkNode","cleanedNodeText","replace","undefined","splice","removeMember","removalIndex","clearMembers","nextMembers","getMembers","nodeType","window","Node","ELEMENT_NODE","Error","matcher","focus","tagName","select","module","exports","createFocusGroup"],"mappings":"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","sourcesContent":["function FocusGroup(options) {\n  options = options || {};\n  var userKeybindings = options.keybindings || {};\n  this._settings = {\n    keybindings: {\n      next: (userKeybindings.next) || { keyCode: 40 },\n      prev: (userKeybindings.prev) || { keyCode: 38 },\n      first: userKeybindings.first,\n      last: userKeybindings.last,\n    },\n    wrap: options.wrap,\n    stringSearch: options.stringSearch,\n    stringSearchDelay: 800\n  };\n\n  // Construct a keybinding lookup that will be more useful later\n  this._keybindingsLookup = [];\n  var action;\n  var eventMatchers\n  for (action in this._settings.keybindings) {\n    eventMatchers = this._settings.keybindings[action];\n    if (!eventMatchers) continue;\n    [].concat(eventMatchers).forEach(function(eventMatcher) {\n      eventMatcher.metaKey = eventMatcher.metaKey || false;\n      eventMatcher.ctrlKey = eventMatcher.ctrlKey || false;\n      eventMatcher.altKey = eventMatcher.altKey || false;\n      eventMatcher.shiftKey = eventMatcher.shiftKey || false;\n      this._keybindingsLookup.push({\n        action: action,\n        eventMatcher: eventMatcher\n      });\n    }.bind(this));\n  }\n\n  this._searchString = '';\n  this._members = [];\n  if (options.members) this.setMembers(options.members);\n  this._boundHandleKeydownEvent = this._handleKeydownEvent.bind(this);\n}\n\nFocusGroup.prototype.activate = function() {\n  // Use capture in case other libraries might grab it first -- i.e. React\n  document.addEventListener('keydown', this._boundHandleKeydownEvent, true);\n  return this;\n};\n\nFocusGroup.prototype.deactivate = function() {\n  document.removeEventListener('keydown', this._boundHandleKeydownEvent, true);\n  this._clearSearchStringRefreshTimer();\n  return this;\n};\n\nFocusGroup.prototype._handleKeydownEvent = function(event) {\n  // Only respond to keyboard events when\n  // focus is already within the focus-group\n  var activeElementIndex = this._getActiveElementIndex();\n  if (activeElementIndex === -1) return;\n\n  // See if the event matches any registered keybinds\n  var eventBound = false;\n  this._keybindingsLookup.forEach(function(keybinding) {\n    if (!matchesEvent(keybinding.eventMatcher, event)) return;\n    eventBound = true;\n    event.preventDefault();\n    switch (keybinding.action) {\n      case 'next':\n        this.moveFocusForward();\n        break;\n      case 'prev':\n        this.moveFocusBack();\n        break;\n      case 'first':\n        this.moveFocusToFirst();\n        break;\n      case 'last':\n        this.moveFocusToLast();\n        break;\n      default: return;\n    }\n  }.bind(this));\n\n  if (!eventBound) {\n    this._handleUnboundKey(event);\n  }\n};\n\nFocusGroup.prototype.moveFocusForward = function() {\n  var activeElementIndex = this._getActiveElementIndex();\n  var targetIndex;\n  if (activeElementIndex < this._members.length - 1) {\n    targetIndex = activeElementIndex + 1;\n  } else if (this._settings.wrap) {\n    targetIndex = 0;\n  } else {\n    targetIndex = activeElementIndex;\n  }\n  this.focusNodeAtIndex(targetIndex);\n  return targetIndex;\n};\n\nFocusGroup.prototype.moveFocusBack = function() {\n  var activeElementIndex = this._getActiveElementIndex();\n  var targetIndex;\n  if (activeElementIndex > 0) {\n    targetIndex = activeElementIndex - 1;\n  } else if (this._settings.wrap) {\n    targetIndex = this._members.length - 1;\n  } else {\n    targetIndex = activeElementIndex;\n  }\n  this.focusNodeAtIndex(targetIndex);\n  return targetIndex;\n};\n\nFocusGroup.prototype.moveFocusToFirst = function() {\n  this.focusNodeAtIndex(0);\n};\n\nFocusGroup.prototype.moveFocusToLast = function() {\n  this.focusNodeAtIndex(this._members.length - 1);\n};\n\nFocusGroup.prototype._handleUnboundKey = function(event) {\n  if (!this._settings.stringSearch) return;\n\n  // While a string search is underway, ignore spaces\n  // and prevent the default space-key behavior\n  if (this._searchString !== '' && (event.key === ' ' || event.keyCode === 32)) {\n    event.preventDefault();\n    return -1;\n  }\n\n  // Only respond to letter keys\n  if (!isLetterKeyCode(event.keyCode)) return -1;\n\n  // If the letter key is part of a key combo,\n  // let it do whatever it was going to do\n  if (event.ctrlKey || event.metaKey || event.altKey) return -1;\n\n  event.preventDefault();\n\n  this._addToSearchString(String.fromCharCode(event.keyCode));\n  this._runStringSearch();\n};\n\nFocusGroup.prototype._clearSearchString = function() {\n  this._searchString = '';\n};\n\nFocusGroup.prototype._addToSearchString = function(letter) {\n  // Always store the lowercase version of the letter\n  this._searchString += letter.toLowerCase();\n};\n\nFocusGroup.prototype._startSearchStringRefreshTimer = function() {\n  var self = this;\n  this._clearSearchStringRefreshTimer();\n  this._stringSearchTimer = setTimeout(function() {\n    self._clearSearchString();\n  }, this._settings.stringSearchDelay);\n};\n\nFocusGroup.prototype._clearSearchStringRefreshTimer = function() {\n  clearTimeout(this._stringSearchTimer);\n};\n\nFocusGroup.prototype._runStringSearch = function() {\n  this._startSearchStringRefreshTimer();\n  this.moveFocusByString(this._searchString);\n};\n\nFocusGroup.prototype.moveFocusByString = function(str) {\n  var member;\n  for (var i = 0, l = this._members.length; i < l; i++) {\n    member = this._members[i];\n    if (!member.text) continue;\n\n    if (member.text.indexOf(str) === 0) {\n      return focusNode(member.node);\n    }\n  }\n};\n\nFocusGroup.prototype._findIndexOfNode = function(searchNode) {\n  for (var i = 0, l = this._members.length; i < l; i++) {\n    if (this._members[i].node === searchNode) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nFocusGroup.prototype._getActiveElementIndex = function() {\n  return this._findIndexOfNode(document.activeElement);\n};\n\nFocusGroup.prototype.focusNodeAtIndex = function(index) {\n  var member = this._members[index];\n  if (member) focusNode(member.node);\n  return this;\n};\n\nFocusGroup.prototype.addMember = function(memberData, index) {\n  var node = memberData.node || memberData;\n  var nodeText = memberData.text || node.getAttribute('data-focus-group-text') || node.textContent || '';\n\n  this._checkNode(node);\n\n  var cleanedNodeText = nodeText.replace(/[\\W_]/g, '').toLowerCase();\n  var member = {\n    node: node,\n    text: cleanedNodeText,\n  };\n\n  if (index !== null && index !== undefined) {\n    this._members.splice(index, 0, member);\n  } else {\n    this._members.push(member);\n  }\n  return this;\n};\n\nFocusGroup.prototype.removeMember = function(member) {\n  var removalIndex = (typeof member === 'number')\n    ? member\n    : this._findIndexOfNode(member);\n  if (removalIndex === -1) return;\n  this._members.splice(removalIndex, 1);\n  return this;\n};\n\nFocusGroup.prototype.clearMembers = function() {\n  this._members = [];\n  return this;\n};\n\nFocusGroup.prototype.setMembers = function(nextMembers) {\n  this.clearMembers();\n  for (var i = 0, l = nextMembers.length; i < l; i++) {\n    this.addMember(nextMembers[i]);\n  }\n  return this;\n};\n\nFocusGroup.prototype.getMembers = function() {\n  return this._members;\n};\n\nFocusGroup.prototype._checkNode = function(node) {\n  if (!node.nodeType || node.nodeType !== window.Node.ELEMENT_NODE) {\n    throw new Error('focus-group: only DOM nodes allowed');\n  }\n  return node;\n};\n\nfunction matchesEvent(matcher, event) {\n  for (var key in matcher) {\n    if (event[key] !== undefined && matcher[key] !== event[key]) return false;\n  }\n  return true;\n}\n\nfunction isLetterKeyCode(keyCode) {\n  return keyCode >= 65 && keyCode <= 90;\n}\n\nfunction focusNode(node) {\n  if (!node || !node.focus) return;\n  node.focus();\n  if (node.tagName.toLowerCase() === 'input') node.select();\n}\n\nmodule.exports = function createFocusGroup(options) {\n  return new FocusGroup(options);\n};\n"]},"metadata":{},"sourceType":"script"}